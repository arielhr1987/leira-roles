(()=>{"use strict";var e,i;window.jQuery,window.wp.i18n,window.wp=window.wp||{},e=jQuery,i=window.wp,window.inlideEditRole={init:function(){var i=this,t=e("#inline-edit"),n=e("#the-list");i.type=n.attr("data-wp-lists").substring(5),i.what="#"+i.type+"-",n.on("click",".editinline",function(){e(this).attr("aria-expanded","true"),inlideEditRole.edit(this)}),t.keyup(function(e){if(27===e.which)return inlideEditRole.revert()}),e(".cancel",t).click(function(){return inlideEditRole.revert()}),e(".save",t).click(function(){return inlideEditRole.save(this)}),e("input, select",t).keydown(function(i){if(13===i.which&&"capabilities_search_input"!==e(this).prop("name"))return inlideEditRole.save(this)}),e('#posts-filter input[type="submit"]').mousedown(function(){i.revert()}),e(":checkbox.cb-capabilities-select-all",t).on("change",function(){var i=e(this);i.parents(".input-text-wrap").find(".capabilities-container :checkbox").not(i).prop("checked",i.is(":checked"))}),e('input[name="capabilities_search_input"]',t).on("keyup input",function(i){var t=e(this),n=t.val(),a=t.parents(".input-text-wrap").find(".capabilities-container");e(".notice",a).addClass("hidden"),a.find("> label.capability-item").each(function(i,t){var a;a=""===n.trim()||-1!==e(t).text().indexOf(n),e(this).toggleClass("hidden",!a)}),e("> label.capability-item:not(.hidden)",a).length||e(".notice",a).removeClass("hidden")}).on("keydown",function(e){if(13===e.which)return!1})},toggle:function(i){var t=this;"none"===e(t.what+t.getId(i)).css("display")?t.revert():t.edit(i)},edit:function(i){var t,n,a=this;return a.revert(),"object"==typeof i&&(i=a.getId(i)),t=e("#inline-edit").clone(!0),n=e("#inline_"+i),e("td",t).attr("colspan",e("th:visible, td:visible",".wp-list-table.widefat:first thead").length),e(a.what+i).hide().after(t).after('<tr class="hidden"></tr>'),e("> div",n).each(function(i,n){var a=(n=e(n)).attr("class");if(n=n.text(),"role"===a)e(":input[name=old_"+a+"]",t).val(n),e(":input[name=new_"+a+"]",t).val(n);else if("capabilities"===a){var l=e("div.capabilities-container",t),d=JSON.parse(n);e.each(d,function(e,i){var t='<label class="alignleft capability-item">';t+='<input type="checkbox" name="capability[]" value="'+e+'"'+(i?' checked="checked"':"")+">",t+='<span class="checkbox-title">'+e+"</span>",leiraRolesL10n[e]&&(t+='<i class="dashicons dashicons-editor-help leira-tooltip" title="'+leiraRolesL10n[e]+'"></i>'),t+="</label>",l.append(t)})}else e(":input[name="+a+"]",t).val(n)}),e(t).attr("id","edit-"+i).addClass("inline-editor").show(),e(".ptitle",t).eq(0).focus(),!1},save:function(t){var n;return"object"==typeof t&&(t=this.getId(t)),e("table.widefat .spinner").addClass("is-active"),n={action:"leira-roles-quick-edit-role"},n=e("#edit-"+t).find(":input").serialize()+"&"+e.param(n),e.post(ajaxurl,n,function(n){var a,l,d,r=e("#edit-"+t+" .inline-edit-save .notice-error"),s=r.find(".error");e("table.widefat .spinner").removeClass("is-active"),n?-1!==n.indexOf("<tr")?(e(inlideEditRole.what+t).siblings("tr.hidden").addBack().remove(),l=e(n).attr("id"),e("#edit-"+t).before(n).remove(),l?(d=l.replace(inlideEditRole.type+"-",""),a=e("#"+l)):(d=t,a=e(inlideEditRole.what+t)),e("#parent").find("option[value="+d+"]").text(a.find(".row-title").text()),a.hide().fadeIn(400,function(){a.find(".editinline").attr("aria-expanded","false").focus(),i.a11y.speak(leiraRolesL10n.inlineEditSaved)})):(r.removeClass("hidden"),s.html(n),i.a11y.speak(s.text())):(r.removeClass("hidden"),s.html(leiraRolesL10n.inlineEditError),i.a11y.speak(leiraRolesL10n.inlineEditError))}),!1},revert:function(){var i=e("table.widefat tr.inline-editor").attr("id");i&&(e("table.widefat .spinner").removeClass("is-active"),e("#"+i).siblings("tr.hidden").addBack().remove(),i=i.substring(i.lastIndexOf("-")+1),e(this.what+i).show().find(".editinline").attr("aria-expanded","false").focus())},getId:function(i){var t=("TR"===i.tagName?i.id:e(i).parents("tr").attr("id")).split("-");return t[t.length-1]}},e(document).ready(function(){inlideEditRole.init()})})();